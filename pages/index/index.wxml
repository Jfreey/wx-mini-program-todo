<view class="container">
    <view class="button-login" wx:if="{{ !hasUserInfo && canIUse}}">
        <button open-type="getUserInfo" bind:getuserinfo="getUserInfo">查看TODO-LIST</button>
    </view>
    <view wx:else class="info-panel">
        <view class="top-panel">
            <view class="userinfo">
                <view class="userinfo-panel">
                    <image class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
                    <text class="userinfo-nickname">欢迎回来，{{userInfo.nickName}}</text>
                </view>
                <view class="todo-count">
                    TODO:
                    <text>{{todoList.length}}</text>
                    条
                </view>
            </view>
            <view class="search-bar">
                <input class="input" type="text" model:value="{{todoContent}}" placeholder="你想要TODO什么"
                       confirm-type="done" bind:confirm="addNewTodo"/>
            </view>
        </view>
        <view class="list">
            <checkbox-group bind:change="checkboxChange">
                <view wx:for="{{todoList}}">
                    <view class="todo-item" bind:tap="selectHandle" data-index="{{index}}">
                        <checkbox value="{{item.value}}" checked="{{item.checked}}"></checkbox>
                        <view wx:if="{{item.checked === true}}" class="complete">{{item.value}}</view>
                        <view wx:else>{{item.value}}</view>
                    </view>
                </view>
            </checkbox-group>
        </view>
    </view>
</view>
